# 前端开发需求文档

## 1. 概述

本文档详细描述了SSL证书自动化管理系统的前端开发需求。前端采用React框架开发，提供用户友好的界面，实现证书管理、自动部署和证书监控三大核心功能。

## 2. 技术栈

- **框架**：React 18+
- **UI组件库**：Ant Design 或 Material-UI
- **状态管理**：Redux 或 React Context API
- **路由**：React Router
- **HTTP客户端**：Axios
- **类型检查**：TypeScript
- **构建工具**：Vite
- **CSS预处理器**：SCSS/Less

## 3. 页面结构

### 3.1 公共组件

#### 3.1.1 导航栏
- 系统Logo
- 主导航菜单（证书管理、自动部署、证书监控）
- 用户信息与下拉菜单（个人中心、设置、退出登录）
- 消息通知图标（显示未读消息数量）

#### 3.1.2 侧边栏
- 当前模块的子菜单
- 可折叠设计

#### 3.1.3 页脚
- 版权信息
- 系统版本号
- 帮助链接

#### 3.1.4 通用组件
- 确认对话框
- 消息提示（成功、警告、错误）
- 加载指示器
- 分页控件
- 表格组件（支持排序、筛选）
- 搜索框组件

### 3.2 登录页面

- 用户名/邮箱输入框
- 密码输入框（带显示/隐藏切换）
- 记住我选项
- 登录按钮
- 忘记密码链接
- 注册账号链接（如支持自助注册）

### 3.3 证书管理页面

#### 3.3.1 证书列表
- 搜索栏：支持按域名或备注搜索
- 顶部操作按钮：
  - 免费申请证书
  - 删除失效证书
- 证书列表表格，包含以下列：
  - 域名
  - 域名验证状态
  - 证书品牌
  - 有效期（天）
  - 加密方式
  - 状态（已签发/未签发）
  - 备注
  - 操作（编辑、下载、删除）
- 分页控件

#### 3.3.2 免费申请证书弹窗
- 域名输入框（必填，带*标记）
- 域名验证信息区域（必填，带*标记）：
  - 表格显示：状态、服务商、主机记录、记录类型、记录值
  - 初始状态显示"待配置"和"未知"
- 证书厂商下拉选择框（必填，带*标记）：
  - 选项：Google、Let's Encrypt、ZeroSSL
- 加密算法下拉选择框（必填，带*标记）：
  - 选项：ECC、RSA
- 备注输入框
- 验证域名按钮：
  - 点击触发域名验证流程
  - 验证失败显示错误提示："域名验证未通过，请检查配置或稍后再试"
  - 验证成功则生成证书并在列表中添加新记录
- 取消按钮

#### 3.3.3 证书详情/编辑弹窗
- 显示证书详细信息（只读）：
  - 域名（如：*.yueguisuchong.com, yueguisuchong.com）
  - 证书品牌
  - 生效时间（如：2025-06-01 10:08:32）
  - 失效时间（如：2025-08-30 10:08:31）
  - 创建时间（如：2025-06-01 11:08:07）
- 备注输入框（可编辑）
- 保存按钮
- 取消按钮

#### 3.3.4 证书下载功能
- 支持下载不同格式的证书文件
- 下载进度指示
- 下载完成提示

### 3.4 自动部署页面

#### 3.4.1 服务器列表
- 服务器列表表格，包含以下列：
  - 类型（如：nginx）
  - 名称
  - 系统（如：CentOS Linux 7 (Core)）
  - IP地址
  - 版本（如：1.17.0）
  - 状态（带颜色指示，如：●正常）
  - 最后更新时间
  - 自动部署（开关控件）
  - 备注
  - 操作（编辑、删除）
- 添加服务器按钮

#### 3.4.2 服务器详情/编辑弹窗
- 显示服务器详细信息
- 备注输入框（可编辑）
- 保存按钮
- 取消按钮

#### 3.4.3 添加服务器弹窗
- 服务器类型选择
- 名称输入框
- 系统信息输入框
- IP地址输入框
- 版本输入框
- 自动部署开关
- 备注输入框
- 保存按钮
- 取消按钮

### 3.5 证书监控页面

#### 3.5.1 监控列表
- 证书监控列表表格，包含以下列：
  - 主机域名
  - 证书等级
  - 加密方式
  - 端口
  - IP类型
  - IP地址
  - 状态
  - 有效期（天）（支持排序）
  - 检测开关
  - 备注
  - 操作（检测、编辑备注、删除）
- 添加监控按钮

#### 3.5.2 添加监控弹窗
- 主机域名输入框
- 端口输入框
- IP类型选择
- IP地址输入框
- 检测开关
- 备注输入框
- 保存按钮
- 取消按钮

#### 3.5.3 编辑监控弹窗
- 显示监控详细信息
- 备注输入框（可编辑）
- 检测开关（可编辑）
- 保存按钮
- 取消按钮

## 4. 交互设计

### 4.1 证书申请流程
1. 用户点击"免费申请证书"按钮
2. 弹出申请表单
3. 用户填写域名、选择证书厂商和加密算法，可选填备注
4. 系统显示DNS验证信息
5. 用户配置DNS记录后点击"验证域名"按钮
6. 系统验证域名配置
7. 验证成功后，系统申请证书并在列表中添加新记录
8. 验证失败则显示错误提示

### 4.2 证书管理操作
1. **编辑**：点击编辑按钮，弹出编辑窗口，用户可修改备注信息
2. **下载**：点击下载按钮，系统生成证书文件并触发下载
3. **删除**：点击删除按钮，弹出确认对话框，确认后删除证书

### 4.3 自动部署配置
1. 用户通过开关控件开启/关闭服务器的自动部署功能
2. 开启自动部署时，系统提示确认
3. 确认后，系统配置自动部署并更新状态

### 4.4 证书监控操作
1. **检测**：点击检测按钮，系统立即执行一次证书检测并更新状态
2. **编辑备注**：点击编辑按钮，弹出编辑窗口，用户可修改备注信息
3. **删除**：点击删除按钮，弹出确认对话框，确认后删除监控配置

## 5. 响应式设计

- 系统界面需支持在不同设备上的良好显示：
  - 桌面电脑（1920×1080及以上）
  - 笔记本电脑（1366×768及以上）
  - 平板电脑（横屏和竖屏模式）
- 关键功能区域在小屏幕设备上保持可用性
- 表格在小屏幕设备上可水平滚动

## 6. 性能要求

- 页面首次加载时间不超过3秒（在标准网络环境下）
- 用户交互响应时间不超过300毫秒
- 列表数据加载时间不超过1秒
- 支持大量数据的高效渲染（分页、虚拟滚动等）

## 7. 兼容性要求

- 支持主流现代浏览器：
  - Chrome（最新版本及前两个版本）
  - Firefox（最新版本及前两个版本）
  - Safari（最新版本及前两个版本）
  - Edge（最新版本及前两个版本）
- 不要求支持IE浏览器

## 8. 安全要求

- 实现CSRF防护
- 敏感数据（如密钥）在前端不明文显示
- 所有API请求需携带认证信息
- 防止XSS攻击（输入验证、输出编码）
- 实现适当的权限控制，限制用户只能访问自己的资源

## 9. 国际化与本地化

- 支持中文界面
- 预留国际化扩展接口
- 日期、时间格式符合中国用户习惯

## 10. 辅助功能

- 提供适当的键盘导航支持
- 确保颜色对比度符合WCAG 2.0 AA级标准
- 为图像和图标提供替代文本

## 11. 前后端接口

前端需要与后端API进行交互，主要接口包括：

### 11.1 认证接口
- 登录
- 登出
- 刷新令牌

### 11.2 证书管理接口
- 获取证书列表
- 申请新证书
- 验证域名
- 获取证书详情
- 更新证书信息
- 删除证书
- 下载证书

### 11.3 自动部署接口
- 获取服务器列表
- 添加服务器
- 更新服务器信息
- 删除服务器
- 配置自动部署

### 11.4 证书监控接口
- 获取监控列表
- 添加监控配置
- 更新监控配置
- 删除监控配置
- 执行证书检测

## 12. 开发规范

- 使用ESLint和Prettier保持代码风格一致
- 组件采用函数式组件和Hooks
- 遵循React最佳实践
- 使用TypeScript进行类型检查
- 编写单元测试，覆盖率不低于70%
- 代码提交前进行代码审查

## 13. 交付物

- 源代码
- 构建脚本
- 开发文档
- 组件库文档
- 单元测试
- 构建产物
